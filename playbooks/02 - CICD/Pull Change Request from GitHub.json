{
    "@type": "Workflow",
    "triggerLimit": null,
    "name": "Pull Change Request from GitHub",
    "aliasName": null,
    "tag": null,
    "description": "Sync the change request with development or staging environment.",
    "isActive": false,
    "debug": false,
    "singleRecordExecution": false,
    "remoteExecutableFlag": false,
    "parameters": [],
    "synchronous": false,
    "collection": "\/api\/3\/workflow_collections\/4c58fed3-9e16-451a-9528-0be2b71acda4",
    "versions": [],
    "triggerStep": "\/api\/3\/workflow_steps\/e1a59488-797a-4c3f-81df-ac37a7eb6bdc",
    "steps": [
        {
            "@type": "WorkflowStep",
            "name": "Clone Repository",
            "description": null,
            "arguments": {
                "name": "GitHub",
                "config": "32b07067-f1d2-43b1-8436-c3b4b532ea5f",
                "params": {
                    "name": "{{vars.cr_repo}}",
                    "clone_zip": true
                },
                "version": "1.0.0",
                "connector": "github",
                "operation": "clone_repository",
                "operationTitle": "Clone Repository",
                "pickFromTenant": false,
                "step_variables": []
            },
            "status": null,
            "top": "300",
            "left": "125",
            "stepType": "\/api\/3\/workflow_step_types\/0bfed618-0316-11e7-93ae-92361f002671",
            "group": null,
            "uuid": "2d535a41-f542-4c0d-8c0a-174ad9cf58aa"
        },
        {
            "@type": "WorkflowStep",
            "name": "Create Import Job",
            "description": null,
            "arguments": {
                "params": {
                    "iri": "\/api\/3\/import_jobs",
                    "body": "{\n  \"status\": \"Draft\",\n  \"file\": {\n    \"@context\": \"{{vars.steps.Get_Clone_Repo_Zip_File.data['@context']}}\",\n    \"@id\": \"{{vars.steps.Get_Clone_Repo_Zip_File.data['@id']}}\",\n    \"@type\": \"File\",\n    \"uuid\": \"{{vars.steps.Get_Clone_Repo_Zip_File.data.uuid}}\",\n    \"assignee\": \"\",\n    \"id\": \"{{vars.steps.Get_Clone_Repo_Zip_File.data.uuid}}\",\n    \"filename\": \"{{vars.steps.Get_Clone_Repo_Zip_File.data.filename}}\",\n    \"mimeType\": \"application\/zip\"\n  }\n}",
                    "method": "POST"
                },
                "version": "3.2.2",
                "connector": "cyops_utilities",
                "operation": "make_cyops_request",
                "operationTitle": "FSR: Make FortiSOAR API Call",
                "step_variables": []
            },
            "status": null,
            "top": "570",
            "left": "125",
            "stepType": "\/api\/3\/workflow_step_types\/0109f35d-090b-4a2b-bd8a-94cbc3508562",
            "group": null,
            "uuid": "5cb3175c-07ff-4206-b559-11e1a2498a36"
        },
        {
            "@type": "WorkflowStep",
            "name": "Get Import Job",
            "description": null,
            "arguments": {
                "params": {
                    "iri": "\/api\/3\/import_jobs\/{{vars.steps.Create_Import_Job.data.uuid}}?__selectFields=errorMessage,status,progressPercent,file,currentlyImporting,options",
                    "body": "",
                    "method": "GET"
                },
                "version": "3.2.2",
                "do_until": {
                    "delay": 5,
                    "retries": 5,
                    "condition": "{{vars.result.data.status == \"Reviewing\"}}"
                },
                "connector": "cyops_utilities",
                "operation": "make_cyops_request",
                "operationTitle": "FSR: Make FortiSOAR API Call",
                "step_variables": []
            },
            "status": null,
            "top": "840",
            "left": "125",
            "stepType": "\/api\/3\/workflow_step_types\/0109f35d-090b-4a2b-bd8a-94cbc3508562",
            "group": null,
            "uuid": "73817391-d97b-45c7-89d7-d7f37b0f028a"
        },
        {
            "@type": "WorkflowStep",
            "name": "Import Zip File",
            "description": null,
            "arguments": {
                "params": {
                    "iri": "\/api\/import\/{{vars.steps.Create_Import_Job.data.uuid}}",
                    "body": "",
                    "method": "PUT"
                },
                "version": "3.2.1",
                "connector": "cyops_utilities",
                "operation": "make_cyops_request",
                "operationTitle": "FSR: Make FortiSOAR API Call",
                "step_variables": []
            },
            "status": null,
            "top": "975",
            "left": "125",
            "stepType": "\/api\/3\/workflow_step_types\/0109f35d-090b-4a2b-bd8a-94cbc3508562",
            "group": null,
            "uuid": "b0d56020-103a-4a34-8f52-5a5caab52fbd"
        },
        {
            "@type": "WorkflowStep",
            "name": "Configuration",
            "description": null,
            "arguments": {
                "cr_repo": "{{vars.input.params['changeRequest(CR)RepositoryName']}}"
            },
            "status": null,
            "top": "165",
            "left": "125",
            "stepType": "\/api\/3\/workflow_step_types\/04d0cf46-b6a8-42c4-8683-60a7eaa69e8f",
            "group": null,
            "uuid": "b1435839-e126-41e2-bd4a-11e434ce321c"
        },
        {
            "@type": "WorkflowStep",
            "name": "Start Import Job Option Generation",
            "description": null,
            "arguments": {
                "params": {
                    "iri": "\/api\/import\/{{vars.steps.Create_Import_Job.data.uuid}}",
                    "body": "",
                    "method": "GET"
                },
                "version": "3.2.2",
                "connector": "cyops_utilities",
                "operation": "make_cyops_request",
                "operationTitle": "FSR: Make FortiSOAR API Call",
                "step_variables": []
            },
            "status": null,
            "top": "705",
            "left": "125",
            "stepType": "\/api\/3\/workflow_step_types\/0109f35d-090b-4a2b-bd8a-94cbc3508562",
            "group": null,
            "uuid": "c0543d81-752f-4c87-8c49-a1e07c8cbe59"
        },
        {
            "@type": "WorkflowStep",
            "name": "Start",
            "description": null,
            "arguments": {
                "route": "8cb277ad-c94e-4615-a6f7-a02bcef18bd9",
                "resources": [
                    "change_requests"
                ],
                "inputVariables": [
                    {
                        "name": "changeRequest(CR)RepositoryName",
                        "type": "string",
                        "label": "Change Request (CR) Repository Name",
                        "tooltip": "",
                        "dataType": "text",
                        "formType": "text",
                        "required": true,
                        "_expanded": true,
                        "defaultValue": null,
                        "_previousName": "pleaseEnterChangeRequest(CR)RepositoryName",
                        "useRecordFieldDefault": false
                    }
                ],
                "step_variables": {
                    "input": {
                        "params": {
                            "changeRequest(CR)RepositoryName": "{{vars.request.data[\"changeRequest(CR)RepositoryName\"]}}"
                        },
                        "records": "{{vars.input.records}}"
                    }
                },
                "_promptexpanded": true,
                "displayConditions": {
                    "change_requests": {
                        "sort": [],
                        "limit": 30,
                        "logic": "AND",
                        "filters": []
                    }
                },
                "executeButtonText": "Execute",
                "noRecordExecution": true,
                "singleRecordExecution": false
            },
            "status": null,
            "top": "30",
            "left": "125",
            "stepType": "\/api\/3\/workflow_step_types\/f414d039-bb0d-4e59-9c39-a8f1e880b18a",
            "group": null,
            "uuid": "e1a59488-797a-4c3f-81df-ac37a7eb6bdc"
        },
        {
            "@type": "WorkflowStep",
            "name": "Get Clone Repo Zip File",
            "description": null,
            "arguments": {
                "params": {
                    "filename": "{{vars.steps.Clone_Repository.data.path.split('\/')[-1]}}",
                    "file_path": "{{vars.steps.Clone_Repository.data.path}}",
                    "create_attachment": false
                },
                "version": "3.2.1",
                "connector": "cyops_utilities",
                "operation": "upload_file_to_cyops",
                "operationTitle": "File: Upload a file in the system and Create an Attachment",
                "step_variables": []
            },
            "status": null,
            "top": "435",
            "left": "125",
            "stepType": "\/api\/3\/workflow_step_types\/0109f35d-090b-4a2b-bd8a-94cbc3508562",
            "group": null,
            "uuid": "f999d8d0-625f-40ad-9ae5-85900c85b6bb"
        }
    ],
    "routes": [
        {
            "@type": "WorkflowRoute",
            "name": "Clone Repository -> Get Clone Repo Zip File",
            "targetStep": "\/api\/3\/workflow_steps\/f999d8d0-625f-40ad-9ae5-85900c85b6bb",
            "sourceStep": "\/api\/3\/workflow_steps\/2d535a41-f542-4c0d-8c0a-174ad9cf58aa",
            "label": null,
            "isExecuted": false,
            "uuid": "0c97cd40-936e-495c-b3fc-e446942132d0"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Get Clone Repo Zip File -> Import Zip File Job",
            "targetStep": "\/api\/3\/workflow_steps\/5cb3175c-07ff-4206-b559-11e1a2498a36",
            "sourceStep": "\/api\/3\/workflow_steps\/f999d8d0-625f-40ad-9ae5-85900c85b6bb",
            "label": null,
            "isExecuted": false,
            "uuid": "2255fb6b-7595-4e68-a55b-05905b09ee56"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Copy of Get Import Job -> Get Import Job",
            "targetStep": "\/api\/3\/workflow_steps\/73817391-d97b-45c7-89d7-d7f37b0f028a",
            "sourceStep": "\/api\/3\/workflow_steps\/c0543d81-752f-4c87-8c49-a1e07c8cbe59",
            "label": null,
            "isExecuted": false,
            "uuid": "5dc4326e-0661-4174-b0bc-95421ba701b8"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Configuration -> Clone Repository",
            "targetStep": "\/api\/3\/workflow_steps\/2d535a41-f542-4c0d-8c0a-174ad9cf58aa",
            "sourceStep": "\/api\/3\/workflow_steps\/b1435839-e126-41e2-bd4a-11e434ce321c",
            "label": null,
            "isExecuted": false,
            "uuid": "693834a2-e682-4101-b5d8-8cb94ae84d9d"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Start -> Configuration",
            "targetStep": "\/api\/3\/workflow_steps\/b1435839-e126-41e2-bd4a-11e434ce321c",
            "sourceStep": "\/api\/3\/workflow_steps\/e1a59488-797a-4c3f-81df-ac37a7eb6bdc",
            "label": null,
            "isExecuted": false,
            "uuid": "7c6afb5f-d19f-44fb-bdb1-861ac2c24080"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Get Import Job -> Import Zip File",
            "targetStep": "\/api\/3\/workflow_steps\/b0d56020-103a-4a34-8f52-5a5caab52fbd",
            "sourceStep": "\/api\/3\/workflow_steps\/73817391-d97b-45c7-89d7-d7f37b0f028a",
            "label": null,
            "isExecuted": false,
            "uuid": "8293825b-ae32-438c-8276-51f68611d8b9"
        },
        {
            "@type": "WorkflowRoute",
            "name": "Create Import Job -> Copy of Get Import Job",
            "targetStep": "\/api\/3\/workflow_steps\/c0543d81-752f-4c87-8c49-a1e07c8cbe59",
            "sourceStep": "\/api\/3\/workflow_steps\/5cb3175c-07ff-4206-b559-11e1a2498a36",
            "label": null,
            "isExecuted": false,
            "uuid": "accc8272-ef4d-4218-8c8a-c42cf2e8684d"
        }
    ],
    "groups": [],
    "priority": "\/api\/3\/picklists\/2b563c61-ae2c-41c0-a85a-c9709585e3f2",
    "uuid": "5fd72975-0d11-4284-a018-83e1520151cc",
    "owners": [],
    "isPrivate": false,
    "deletedAt": null,
    "recordTags": [
        "CICD"
    ]
}